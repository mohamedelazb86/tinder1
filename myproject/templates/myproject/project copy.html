{% extends 'base.html' %}

{% block title %}
    Ø§Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹
{% endblock title %}
    

{% block css %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<style>
    body { background: #f8f9fa; }
    .card { border-radius: 18px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
    label { font-weight: 600; }
    .form-control, .form-select {
        border-radius: 12px;
        padding: 10px 12px;
    }
    .add-row-btn {
        background: #0d6efd;
        color: white;
        border-radius: 10px;
        padding: 6px 14px;
    }
    .delete-row-btn {
        background: #dc3545;
        color: white;
        border-radius: 10px;
        padding: 6px 14px;
    }
</style>
{% endblock css %}



{% block body %}
<!--begin::Toolbar-->
    <div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
        <!--begin::Toolbar container-->
        <div id="kt_app_toolbar_container" class="app-container container-fluid d-flex flex-stack">
            <!--begin::Page title-->
            <div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
                <!--begin::Title-->
                <h1 class="page-heading d-flex text-gray-900 fw-bold fs-3 flex-column justify-content-center my-0">Multipurpose</h1>
                <!--end::Title-->
            
            </div>
            <!--end::Page title-->
            <!--begin::Actions-->
            <div class="d-flex align-items-center gap-2 gap-lg-3">
                <!--begin::Secondary button-->
                <a href="#" class="btn btn-sm fw-bold btn-secondary" data-bs-toggle="modal" data-bs-target="#kt_modal_create_app">Rollover</a>
                <!--end::Secondary button-->
                <!--begin::Primary button-->
                <a href="#" class="btn btn-sm fw-bold btn-primary" data-bs-toggle="modal" data-bs-target="#kt_modal_new_target">Add Target</a>
                <!--end::Primary button-->
            </div>
            <!--end::Actions-->
        </div>
        <!--end::Toolbar container-->
    </div>
<!--end::Toolbar-->


<div class="container py-4">
    
    <div class="card p-4">
        <h3 class="mb-3 text-primary">ğŸ“Œ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯</h3>

        <form method="POST">

            {% csrf_token %}



            <div class="row mb-3">
                <div class="col-md-6">
                    <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
                    <input name="title" class="form-control" value="{{tinder.title}}" required>
                </div>

                <div class="col-md-6">
                    <label>Ø§Ù„ÙƒÙˆØ¯</label>
                    <input name="code" class="form-control" value="{{tinder.code}}" >
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label>Ø§Ù„Ø­Ø§Ù„Ø©</label>
                    <select name="status" class="form-select">
                        {% for k,v in STATUS_PROJECT %}
                        <option value="{{ k }}">{{ v }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-6">
                    <label>Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
                    <input type="date" name="begin_project" class="form-control">
                </div>
            </div>

            <div class="row mb-3">
                 <div class="col-md-6">
                    <label>Ù…Ø¯Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (Ø¨Ø§Ù„Ø£ÙŠØ§Ù…)</label>
                    <input type="number" name="duration" class="form-control">
                </div>
                <div class="col-md-6">
                    <label> ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø´Ø§Ø¡</label>
                    <input type="date" name="date" class="form-control">
                </div>
            </div>

           

            <div class="mb-3">
                <label>ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
                <textarea name="desciptions" rows="4" class="form-control">{{tinder.descriptions}}</textarea>
            </div>

            <!-- ----------------------------
                 Project Items
            -------------------------------->

             <table class="" id="itemsTable">
                <thead class="table-light">
                    <tr>
                        <th>Ø§Ù„Ø¨ÙŠØ§Ù†</th>
                        <th>Ø§Ù„Ø¨Ù†Ø¯</th>
                        <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                        <th>Ø§Ù„Ø³Ø¹Ø±</th>
                        <th>Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                        <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„Ù‰</th>
                    
                    </tr>
                </thead>
                <tbody>
                
                {% for item in items %}
                    <tr>
                        <td>{{item.statment}}</td>
                        <td>{{item.item}}</td>
                        <td>{{item.quantity}}</td>
                        <td>{{item.price}}</td>
                        <td>{{item.unit}}</td>
                        <td>{{item.total}}</td>
                    
                        
                    </tr> 
                {% endfor %}
                    
                   
                </tbody>
            </table>


            <h4 class="mt-4 text-success">ğŸ“Œ Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h4>

            <table class="" id="itemsTable">
                <thead class="table-light">
                    <tr>
                        <th>Ø§Ù„Ø¨ÙŠØ§Ù†</th>
                        <th>Ø§Ù„Ø¨Ù†Ø¯</th>
                        <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                        <th>Ø§Ù„Ø³Ø¹Ø±</th>
                        <th>Ø§Ù„ÙˆØ­Ø¯Ø©</th>
                        <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„Ù‰</th>
                        <th>Ø­Ø°Ù</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input name="statment[]" class="form-control" type="text"  required></td>
                        <td><input name="item[]" class="form-control" type="text"  required></td>
                        <td><input name="quantity[]" class="form-control" type="number" step="0.01" required></td>
                        <td><input name="price[]" class="form-control" type="number" step="0.01" required></td>
                        <td><input name="unit[]" class="form-control" value="pice"></td>
                        <td><input name="total[]" class="form-control" value="0"></td>
                        <td>
                            <button type="submit" class="delete-row-btn btn">X</button>
                        </td>
                    </tr>
                </tbody>
            </table>

            <button type="button" id="addRow" class="add-row-btn btn mb-3">+ Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button>

            <div class="text-center mt-4">
                <button class="btn btn-success btn-lg px-5">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</button>
            </div>

        </form>
    </div>
</div>


    
{% endblock body %}


{% block js %}
    <script>
    document.getElementById("addRow").onclick = function () {
        let table = document.querySelector("#itemsTable tbody");
        let newRow = `
        <tr>
            <td><input name="quantity[]" class="form-control" type="number" step="0.01" required></td>
            <td><input name="price[]" class="form-control" type="number" step="0.01" required></td>
            <td><input name="unit[]" class="form-control" value="pice"></td>
            <td><button type="button" class="delete-row-btn btn">X</button></td>
        </tr>`;
        table.insertAdjacentHTML("beforeend", newRow);
    };

    document.addEventListener("click", function(e){
        if(e.target.classList.contains("delete-row-btn")){
            e.target.closest("tr").remove();
        }
    });
    </script>
{% endblock js %}
    
    
    
    